
<title>iRacing Database</title>
<div class="jumbotron text-center">
    <h3>iRacing database</h3>
    <h5>Season 4 - 2016</h5>
    <small>{{ 'v%VERSION%.' | interpolate }}</small>
</div>
<div class="col-md-12">
    <div class="col-md-4 panel panel-default">
        <div class="panel-body" style="height:300px;overflow:auto;">
        <table class="table table-striped">
            <thead>
            <th>Cars
                <select data-ng-model="formData.car" data-ng-change="addCar(formData.car)">
                    <option data-ng-repeat="item in cars  | orderBy: 'name'" value="{{item.id}}"> {{item.name}}</option>
                </select>
            </th>
            </thead>
            <tbody >
            <tr data-ng-repeat="item in carListNames">
                <td>{{item.name}}</td>
                <td><button data-ng-click="removeItem(item, 'cars')">X</button></td>
            </tr>
            </tbody>
        </table>
        </div>
    </div>

    <div class="col-md-4 panel panel-default">
        <div class="panel-body" style="height:300px;overflow:auto;">
                <table class="table table-striped">
            <thead>
            <th>
                Tracks
                <select data-ng-model="formData.track" data-ng-change="addTrack(formData.track)">
                    <option data-ng-repeat="item in tracks | orderBy: 'name'" value="{{item.id}}"> {{item.name}}</option>
                </select>
            </th>
            </thead>
            <tbody>
            <tr data-ng-repeat="item in trackListNames">
                <td>{{item.name}}</td>
                <td><button data-ng-click="removeItem(item , 'tracks')">X</button></td>
            </tr>
            </tbody>
        </table>
            </div>
    </div>

    <div class="col-md-4">
        <button class="btn btn-block btn-success" style="display:block" data-ng-click="getSeries()">Search</button>
        <button class="btn btn-block btn-success" style="display:block" data-ng-click="addFreeCars()">Add free cars</button>
        <button class="btn btn-block btn-success" style="display:block" data-ng-click="addFreeTracks()">Add free tracks</button>
        <button class="btn btn-block btn-warning" data-ng-click="clearAll()">Clear all</button>
    </div>

</div>

<div class="col-md-12 ">
    <div class="col-md-4 panel panel-default">
        <div class="panel-body" style="height:300px;overflow:auto;">
            <table class="table table-striped">
                <thead>
                <th>
                    Series
                    <select data-ng-model="formData.series" data-ng-change="addSeries(formData.series)">
                        <option data-ng-repeat="item in series  | orderBy: 'name'" value="{{item.id}}"> {{item.name}}</option>
                    </select>
                </th>
                </thead>
                <tbody>
                <tr data-ng-repeat="item in seriesListNames">
                    <td>{{item.name}}</td>
                    <td><button data-ng-click="removeItem(item, 'series')">X</button></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="col-md-4 panel panel-default">
    <div class="panel-body" style="height:300px;overflow:auto;">
        <table class="table table-striped">
            <thead>
            <th>
                License
                <select data-ng-model="formData.class" data-ng-change="addClass(formData.class)">
                    <option  value="Rookie"> Rookie</option>
                    <option  value="D"> D</option>
                    <option  value="C"> C</option>
                    <option  value="B"> B</option>
                    <option  value="A"> A</option>
                </select>
            </th>
            </thead>
            <tbody>
            <tr data-ng-repeat="item in classList">
                <td>{{item}}</td>
                <td><button data-ng-click="removeItem(item, 'class')">X</button></td>
            </tr>
            </tbody>
        </table>
    </div>
    </div>

    <div class="col-md-4 panel panel-default" style="height:300px;overflow:auto;">
        <h3>Filters</h3>
        <h5 class="panel panel-body" style="display:block;color:white;background-color: cornflowerblue" data-ng-click="showTypes = ! showTypes">Type</h5>
        <div  data-ng-show="showTypes">
            <input type="checkbox" ng-model="formData.type.oval" >Oval<br>
            <input type="checkbox" ng-model="formData.type.road" >Road<br>
        </div>

        <div>
        <h5 class="panel panel-body " style="display:block;color:white;background-color: cornflowerblue" data-ng-click="showWeeks = ! showWeeks">Weeks</h5>
        <div class="col-md-6 form-group" data-ng-show="showWeeks">
            <input type="checkbox" name="week1" ng-model="formData.week.week1" ng-true-value="'13-09-16'">Week 1<br>
            <input type="checkbox" name="week2" ng-model="formData.week.week2" ng-true-value="'20-09-16'">Week 2<br>
            <input type="checkbox" name="week3" ng-model="formData.week.week3" ng-true-value="'27-09-16'">Week 3<br>
            <input type="checkbox" name="week4" ng-model="formData.week.week4" ng-true-value="'4-10-16'">Week 4<br>
            <input type="checkbox" name="week5" ng-model="formData.week.week5" ng-true-value="'11-10-16'">Week 5<br>
            <input type="checkbox" name="week6" ng-model="formData.week.week6" ng-true-value="'18-10-16'">Week 6<br>
        </div>
        <div class="col-md-6 form-group" data-ng-show="showWeeks">
            <input type="checkbox" name="week7" ng-model="formData.week.week7" ng-true-value="'25-10-16'">Week 7<br>
            <input type="checkbox" name="week8" ng-model="formData.week.week8" ng-true-value="'1-11-16'">Week 8<br>
            <input type="checkbox" name="week9" ng-model="formData.week.week9" ng-true-value="'8-11-16'">Week 9<br>
            <input type="checkbox" name="week10" ng-model="formData.week.week10" ng-true-value="'15-11-16'">Week 10<br>
            <input type="checkbox" name="week11" ng-model="formData.week.week11" ng-true-value="'22-11-16'">Week 11<br>
            <input type="checkbox" name="week12" ng-model="formData.week.week12" ng-true-value="'29-11-16'">Week 12<br>
            <input type="checkbox" name="week13" ng-model="formData.week.week13" ng-true-value="'6-12-16'">Week 13<br>
        </div>
        </div>
    </div>
    </div>



</div>


<div class="col-md-12">
    <table class="table table-striped" data-ng-if="result.length > 0">
        <thead>
            <th>Type</th>
            <th>Class</th>
            <th>Car</th>
            <th>Series</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Track</th>
            <th>Type</th>
        </thead>
        <tbody>
            <tr data-ng-repeat="item in result track by $index">
                <td>{{item.type}}</td>
                <td>{{item.class}}</td>
                <td>{{item.car}}</td>
                <td>{{item.series}}</td>
                <td>{{item.start_date}}</td>
                <td>{{item.end_date}}</td>
                <td>{{item.track}}</td>
                <td>{{item.official_type}}</td>
            </tr>
        </tbody>
    </table>
    <div class="alert alert-info" data-ng-if="result.length == 0">No Races found</div>
</div>